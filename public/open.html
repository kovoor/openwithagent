<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Open with Agent</title>
  <meta name="description" content="Pick your AI assistant and get started instantly.">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="stylesheet" href="/style.css">
  <style>
    .ai-btn{
      display:flex;align-items:center;gap:1rem;
      width:100%;padding:1.15rem 1.25rem;
      background:var(--bg);
      border:1px solid var(--border);
      border-radius:12px;
      cursor:pointer;text-align:left;
      font-family:var(--font);
      transition:all .2s;
      text-decoration:none;
      color:inherit;
    }
    .ai-btn:hover{
      border-color:var(--border-hover);
      box-shadow:0 3px 12px rgba(0,0,0,.06);
      transform:translateY(-1px);
      color:inherit;
    }
    .ai-btn .ai-icon{
      width:40px;height:40px;border-radius:10px;
      display:flex;align-items:center;justify-content:center;
      font-size:1.25rem;flex-shrink:0;
    }
    .ai-btn .ai-name{font-weight:700;font-size:var(--text-base);color:var(--fg)}
    .ai-btn .ai-desc{color:var(--fg-dim);font-size:var(--text-sm);margin-top:1px}
    .ai-btn .ai-arrow{color:var(--fg-dim);font-size:1.25rem;margin-left:auto;flex-shrink:0}
    .ai-stack{display:flex;flex-direction:column;gap:.5rem;margin:1rem 0}

    .icon-chatgpt{background:#0fa37f}
    .icon-claude{background:#d97757}
    .icon-gemini{background:#4285f4}
  </style>
</head>
<body>
  <nav>
    <a href="/" class="logo">
      <img src="/favicon.svg" alt="" width="20" height="20" style="border-radius:4px"> OpenWithAgent
    </a>
    <div class="nav-links">
      <a href="/#generator" class="nav-link">Create link</a>
      <a href="https://github.com/kovoor/openwithagent" class="nav-link">GitHub</a>
    </div>
  </nav>

  <div class="container">
    <!-- Loading -->
    <div id="status" class="status loading" style="margin:1.5rem 0">
      Loading instructions...
    </div>

    <!-- Main -->
    <div id="main" style="display:none">
      <div id="repo-info" style="margin-bottom:.25rem;display:none">
        <p style="font-size:.8125rem;color:var(--fg-muted)" id="repo-name"></p>
      </div>

      <div id="fallback-notice" style="display:none;margin:.75rem 0;padding:.6rem .85rem;background:var(--accent-dim);border:1px solid var(--border);border-radius:8px;font-size:.8125rem;color:var(--fg-muted)">
        No <code>.openwithagent.md</code> found &mdash; using the README as context.
      </div>

      <h2 style="font-size:var(--text-lg);font-weight:700;margin:1.5rem 0 .25rem">Open with your AI assistant</h2>
      <p style="font-size:var(--text-sm);color:var(--fg-dim);margin-bottom:1.25rem">Click any button below. The instructions will be sent directly to the app.</p>

      <div class="ai-stack" id="ai-buttons">
        <!-- Buttons injected by JS with encoded URLs -->
      </div>

      <details style="margin-top:1.5rem">
        <summary>View instructions</summary>
        <div class="prompt-preview" style="margin-top:.5rem">
          <pre id="prompt-content"></pre>
        </div>
      </details>
    </div>

    <!-- Error -->
    <div id="error-state" style="display:none;padding:3rem 0">
      <p style="font-weight:600;margin-bottom:.35rem">Could not load instructions</p>
      <p style="color:var(--fg-muted);font-size:.8125rem" id="error-detail"></p>
      <a href="/" class="btn btn-secondary" style="margin-top:1.25rem;text-decoration:none">Create your own link</a>
    </div>
  </div>

  <footer>
    <div class="container" style="padding-top:0;padding-bottom:0">
      <p>&copy; 2026 OpenWithAgent</p>
      <div style="margin-top:.5rem;display:flex;justify-content:center;gap:1rem">
        <a href="https://github.com/kovoor/openwithagent">GitHub</a>
        <a href="https://github.com/kovoor">@kovoor</a>
      </div>
    </div>
  </footer>

  <div class="toast" id="toast"></div>
  <script src="/open.js"></script>
</body>
</html>
