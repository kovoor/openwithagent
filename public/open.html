<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Open with Agent</title>
  <meta name="description" content="Pick your AI coding assistant and get started.">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <nav>
    <a href="/" class="logo">
      <img src="/favicon.svg" alt="" width="20" height="20" style="border-radius:4px"> OpenWithAgent
    </a>
    <div class="nav-links">
      <a href="/#generator" class="nav-link">Create link</a>
      <a href="https://github.com/kovoor/openwithagent" class="nav-link">GitHub</a>
    </div>
  </nav>

  <div class="container">
    <!-- Status -->
    <div id="status" class="status loading" style="margin:1.5rem 0">
      Loading instructions...
    </div>

    <!-- Main content (hidden until loaded) -->
    <div id="main" style="display:none">
      <!-- Repo info -->
      <div id="repo-info" style="margin-bottom:.25rem;display:none">
        <p style="font-size:.8125rem;color:var(--fg-muted)" id="repo-name"></p>
      </div>

      <!-- Fallback notice -->
      <div id="fallback-notice" style="display:none;margin:.75rem 0;padding:.6rem .85rem;background:var(--accent-dim);border:1px solid var(--border);border-radius:8px;font-size:.8125rem;color:var(--fg-muted)">
        No <code>.openwithagent.md</code> found &mdash; using the README as context instead.
      </div>

      <div class="section-label" style="margin-top:1.5rem">Pick your AI tool</div>

      <div class="tool-grid">
        <button class="tool-btn" onclick="copyForTool('claude-code')">
          <span class="tool-icon">&#9641;</span>
          <div>
            <div class="tool-name">Claude Code</div>
            <div class="tool-desc">Runs in Terminal</div>
          </div>
        </button>
        <button class="tool-btn" onclick="copyForTool('claude-app')">
          <span class="tool-icon">&#10038;</span>
          <div>
            <div class="tool-name">Claude App</div>
            <div class="tool-desc">Opens &amp; paste prompt</div>
          </div>
        </button>
        <button class="tool-btn" onclick="copyForTool('cursor')">
          <span class="tool-icon">&#9998;</span>
          <div>
            <div class="tool-name">Cursor</div>
            <div class="tool-desc">Runs in Terminal</div>
          </div>
        </button>
        <button class="tool-btn" onclick="copyForTool('chatgpt')">
          <span class="tool-icon">&#9673;</span>
          <div>
            <div class="tool-name">ChatGPT</div>
            <div class="tool-desc">Opens with prompt</div>
          </div>
        </button>
        <button class="tool-btn" onclick="copyForTool('codex')">
          <span class="tool-icon">&#9881;</span>
          <div>
            <div class="tool-name">Codex CLI</div>
            <div class="tool-desc">Runs in Terminal</div>
          </div>
        </button>
        <button class="tool-btn" onclick="copyForTool('raw')">
          <span class="tool-icon">&#9776;</span>
          <div>
            <div class="tool-name">Copy prompt</div>
            <div class="tool-desc">Paste anywhere</div>
          </div>
        </button>
      </div>

      <!-- Run instructions -->
      <div id="run-hint" style="display:none;margin-top:.75rem;padding:.6rem .85rem;background:var(--bg-muted);border:1px solid var(--border);border-radius:8px;font-size:.8125rem;color:var(--fg-muted)">
        <strong style="color:var(--fg)">Next:</strong> Open the downloaded <code>.command</code> file to run it in Terminal. Or paste (<kbd style="background:var(--bg-hover);border:1px solid var(--border);border-radius:3px;padding:1px 5px;font-size:.75rem">&#8984;V</kbd>) the copied command into your terminal.
      </div>

      <!-- Command preview -->
      <div id="command-section" style="display:none;margin-top:1rem">
        <label id="command-label">Command</label>
        <div class="output-block" style="min-height:52px;align-items:flex-start;padding:.75rem">
          <code id="command-output" style="white-space:pre-wrap"></code>
          <button class="btn btn-ghost copy-btn" onclick="copyCommand()" title="Copy">copy</button>
        </div>
      </div>

      <!-- Instructions preview -->
      <details style="margin-top:1.25rem">
        <summary style="cursor:pointer;color:var(--fg-muted);font-size:.8125rem;font-weight:500">View raw instructions</summary>
        <div class="prompt-preview" style="margin-top:.5rem">
          <pre id="prompt-content"></pre>
        </div>
      </details>
    </div>

    <!-- Error state -->
    <div id="error-state" style="display:none;padding:3rem 0">
      <p style="font-weight:600;margin-bottom:.35rem">Could not load instructions</p>
      <p style="color:var(--fg-muted);font-size:.8125rem" id="error-detail"></p>
      <a href="/" class="btn btn-secondary" style="margin-top:1.25rem;text-decoration:none">Create your own link</a>
    </div>
  </div>

  <footer>
    <div class="container" style="padding-top:0;padding-bottom:0">
      <p>&copy; 2026 OpenWithAgent</p>
      <div style="margin-top:.5rem;display:flex;justify-content:center;gap:1rem">
        <a href="https://github.com/kovoor/openwithagent">GitHub</a>
        <a href="https://github.com/kovoor">@kovoor</a>
      </div>
    </div>
  </footer>

  <div class="toast" id="toast"></div>

  <script src="/open.js"></script>
</body>
</html>
